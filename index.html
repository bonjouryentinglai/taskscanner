<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Task scanner</title>
    </head>
  <body>
    <div id="qr-reader" style="width:500px"></div>
    <div id="qr-reader-results"></div>
  </body>
</html>
<script src="https://raw.githubusercontent.com/mebjas/html5-qrcode/master/minified/html5-qrcode.min.js"></script>
<script charset="utf-8" src="https://static.line-scdn.net/liff/edge/versions/2.22.3/sdk.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.0.3/html5-qrcode.min.js"></script>
<script>
//liff.init({
  //  liffId: '2005710720-1rG8XJLA', // Use own liffId
//}).then(() => {
    // Start to use liff's api
    //alert("initialized");
 //    const html5QrCode = new Html5Qrcode("qr-reader");
 //    const qrCodeSuccessCallback = (decodedText, decodedResult) => {
	//   /* 處理成功掃描 */  
	//   alert(decodedText);
	//   html5QrCode.clear();
 //     };
 //     const config = { fps: 10, qrbox: 800 };
	// // 直接開啟後面鏡頭
	// <!-- 開啟前置鏡頭 -->
	// <!-- html5QrCode.start({ facingMode: "user" }, config, qrCodeSuccessCallback); -->
 //     html5QrCode.start({ 
	//   facingMode: "environment" }, 
	//   config, qrCodeSuccessCallback);
//});
    var resultContainer = document.getElementById('qr-reader-results');
    var lastResult, countResults = 0;
    
    var html5QrcodeScanner = new Html5QrcodeScanner(
        "qr-reader", { fps: 10, qrbox: 250 });
    
    function onScanSuccess(decodedText, decodedResult) {
        if (decodedText !== lastResult) {
            ++countResults;
            lastResult = decodedText;
            console.log(`Scan result = ${decodedText}`, decodedResult);
 
            resultContainer.innerHTML += `<div>[${countResults}] - ${decodedText}</div>`;
            
            // Optional: To close the QR code scannign after the result is found
            html5QrcodeScanner.clear();
        }
    }
    
    // Optional callback for error, can be ignored.
    function onScanError(qrCodeError) {
        // This callback would be called in case of qr code scan error or setup error.
        // You can avoid this callback completely, as it can be very verbose in nature.
    }
    
    html5QrcodeScanner.render(onScanSuccess, onScanError);
</script>
