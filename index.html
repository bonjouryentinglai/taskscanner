<html>
<head>
    <meta charset="utf-8">
    <title>Task scanner</title>
</head>
<body>
    <!-- 條碼顯示的內容顯示在 qr-reader-results -->
    <div id="qr-reader-results"><h1 id="qrtext"></h1></div>
	<!-- 掃描用 -->
    <div id="qr-reader" style="width:100%"></div>    
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.0.3/html5-qrcode.min.js"></script>
<script charset="utf-8" src="https://static.line-scdn.net/liff/edge/versions/2.22.3/sdk.js"></script>
<script>
	liff.init({
	    liffId: '2005710720-1rG8XJLA', // Use own liffId
	})
	    .then(() => {
	        // start to use LIFF's api
		        <!-- 呼叫 html5qrcode 代入qr-reader -->
	const html5QrCode = new Html5Qrcode("qr-reader");
	const qrCodeSuccessCallback = (decodedText, decodedResult) => {
          /* 處理成功掃描 */  
		  //document.getElementById("qrtext").innerHTML = decodedText;
	html5QrCode.stop().then((ignore) => {
	  
	  html5QrCode.clear();
	  liff
		  .sendMessages([
		    {
		      type: "text",
		      text: "專案名稱：Winbond track\n人員：李黛咪\n請輸入時數：",
		    },
		  ])
		  .then(() => {
		    console.log("message sent");
		    liff.closeWindow();

		  })
		  .catch((err) => {
		    console.log("error", err);
		  });
	}).catch((err) => {
	  // Stop failed, handle it.
	});
        
     };
     const config = { fps: 10, qrbox: 800 };
	// 直接開啟後面鏡頭
	<!-- 開啟前置鏡頭 -->
	<!-- html5QrCode.start({ facingMode: "user" }, config, qrCodeSuccessCallback); -->
	html5QrCode.start({ 
	  facingMode: "environment" }, 
	  config, qrCodeSuccessCallback);
	    })
	    .catch((err) => {
	        console.log(err);
	    });

</script>
</head>
</html>
